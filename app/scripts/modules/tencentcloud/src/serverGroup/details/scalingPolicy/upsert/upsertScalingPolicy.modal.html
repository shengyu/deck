<div modal-page class="scaling-policy-modal form-inline">
  <task-monitor monitor="ctrl.taskMonitor"></task-monitor>
  <modal-close dismiss="$dismiss()"></modal-close>
  <div class="modal-header">
    <h4 class="modal-title">{{ctrl.action}} scaling policy</h4>
  </div>
  <div class="modal-body">
    <form name="form" novalidate>
      <h4 class="section-heading">Conditions</h4>
      <div class="section-body">
        <tencent-cloud-alarm-configurer
          command="ctrl.command"
          modal-view-state="ctrl.viewState"
          server-group="ctrl.serverGroup"
          bounds-changed="ctrl.boundsChanged()"
        ></tencent-cloud-alarm-configurer>
      </div>
      <h4 class="section-heading">Actions</h4>
      <div class="section-body" ng-if="!ctrl.command.alarm.metricName">
        <h4 class="text-center">Select a metric</h4>
      </div>
      <div class="section-body" ng-if="ctrl.command.alarm.metricName">
        <div ng-if="ctrl.command.simple">
          <div class="row">
            <div class="col-md-10 col-md-offset-1">
              <p>
                This is a simple scaling policy. To declare different actions based on the magnitude of the alarm,
                <strong>switch to a <a href ng-click="ctrl.switchMode()">step policy</a>.</strong>
              </p>
            </div>
          </div>

          <tencent-cloud-simple-policy-action
            command="ctrl.command"
            view-state="ctrl.viewState"
          ></tencent-cloud-simple-policy-action>
        </div>
        <div ng-if="ctrl.command.step">
          <tencent-cloud-step-policy-action
            command="ctrl.command"
            view-state="ctrl.viewState"
            bounds-changed="ctrl.boundsChanged()"
          ></tencent-cloud-step-policy-action>
        </div>
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button class="btn btn-default" ng-click="ctrl.cancel()">Cancel</button>
    <submit-button
      is-disabled="!form.$valid"
      submitting="taskMonitor.submitting"
      on-click="ctrl.save()"
      is-new="ctrl.viewState.isNew"
    ></submit-button>
  </div>
</div>
